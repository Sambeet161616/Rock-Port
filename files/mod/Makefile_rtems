#####################################################################################################################
#Directory where rtems will be installed
PREFIX=$(INSTALL_PREFIX)/rtems
EXPORT_PATH=export PATH=$(PREFIX)/bin:${PATH}
TEMP=temp-
include ${BUILD_PREFIX}/Rock-Port_ana/files/RTEMS_mod_ver
#####################################################################################################################
all:configure-rtems\
	compile-rtems
#####################################################################################################################
rtems-dir:
		if [ ! -d $(TEMP)rtems-$(RTEMS_VER) ] ; then mkdir $(TEMP)rtems-$(RTEMS_VER); fi

configure-rtems:rtems-dir
		cd $(TEMP)rtems-$(RTEMS_VER);\
		$(EXPORT_PATH);\
		../rtems-$(RTEMS_VER).0-rc1/configure --target=$(TARGET)\
		--disable-posix \
		--enable-networking \
		--disable-cxx \
		--enable-rtemsbsp=$(BSP) \
		--prefix=$(PREFIX)/$(RTEMS_VER); \

compile-rtems:rtems-dir
		cd $(TEMP)rtems-$(RTEMS_VER);\
		$(EXPORT_PATH);\
		make all
		
		
			
build-rsb:
		cd rtems-source-builder-$(RTEMS_VER).0-rc1/rtems;\
		../source-builder/sb-set-builder \
		--prefix=$(PREFIX)/$(RTEMS_VER).0-rc1 $(RTEMS_VER)/$(RSB_SB) \
		2>&1 | tee compile-rsb.out

#####################################################################################################################


